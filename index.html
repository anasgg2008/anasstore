<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>تعديل الأسعار</title>
<style>
  body { font-family: sans-serif; direction: rtl; padding: 20px; }
  input, button { padding: 8px; margin: 5px 0; width: 100%; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; }
  th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
  th { background-color: #f2f2f2; }
</style>
</head>
<body>

<h2>تعديل الأسعار</h2>

<label>اسم الغرض:</label>
<input type="text" id="itemName" placeholder="مثلاً: كولون" />

<label>سعر الشراء:</label>
<input type="number" id="purchasePrice" placeholder="مثلاً: 6500" />

<label>سعر البيع:</label>
<input type="number" id="salePrice" placeholder="مثلاً: 10999" />

<button onclick="addOrUpdateItem()">إضافة أو تعديل الغرض</button>

<div id="message" style="color:red; margin-top:10px;"></div>

<table>
<thead>
<tr><th>اسم الغرض</th><th>سعر الشراء</th><th>سعر البيع</th><th>حذف</th></tr>
</thead>
<tbody id="itemsTable"></tbody>
</table>

<script>
  // استدعاء البيانات من التخزين المحلي أو تعيين القيمة الافتراضية
  let items = JSON.parse(localStorage.getItem('itemsPrices')) || {};

  const messageEl = document.getElementById('message');
  const tableBody = document.getElementById('itemsTable');

  function renderTable() {
    tableBody.innerHTML = '';
    for (const name in items) {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${name}</td>
        <td>${items[name].purchase}</td>
        <td>${items[name].sale}</td>
        <td><button onclick="deleteItem('${name}')">حذف</button></td>
      `;
      tableBody.appendChild(row);
    }
  }

  function addOrUpdateItem() {
    const name = document.getElementById('itemName').value.trim();
    const purchase = Number(document.getElementById('purchasePrice').value);
    const sale = Number(document.getElementById('salePrice').value);

    if (!name) {
      messageEl.textContent = 'يجب إدخال اسم الغرض';
      return;
    }
    if (isNaN(purchase) || isNaN(sale) || purchase <= 0 || sale <= 0) {
      messageEl.textContent = 'يرجى إدخال أسعار صحيحة أكبر من صفر';
      return;
    }

    items[name] = { purchase, sale };
    localStorage.setItem('itemsPrices', JSON.stringify(items));

    messageEl.style.color = 'green';
    messageEl.textContent = `تمت إضافة/تعديل الغرض "${name}" بنجاح`;

    document.getElementById('itemName').value = '';
    document.getElementById('purchasePrice').value = '';
    document.getElementById('salePrice').value = '';

    renderTable();
  }

  function deleteItem(name) {
    delete items[name];
    localStorage.setItem('itemsPrices', JSON.stringify(items));
    renderTable();
    messageEl.textContent = `تم حذف الغرض "${name}"`;
  }

  // عند تحميل الصفحة، عرض الجدول
  renderTable();
</script>

</body>
</html>
